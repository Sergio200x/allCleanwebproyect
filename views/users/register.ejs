<%- include('../partials/doctype.ejs') %>
    <title>Registro</title>
</head>
<body class="body">
    <%- include('../partials/header.ejs') %>

    <form action="/register" method="post" class="register-create-form" enctype="multipart/form-data">
        <h2>Registro</h2>
        <div class="register-actividad-container">
            <label class="tipoActividad"><input type="radio" name="tipoActividad" value="persona"> Persona</label>  
            <label class="tipoActividad"><input type="radio" name="tipoActividad" value="empresa"> Empresa</label>
        </div>

        <div class="register-control-formulario">
            <div class="register-icon-container">
                <i class="far fa-user"></i>
            </div>
            <input 
                type="text" 
                name="nombreCompleto" 
                placeholder="Nombre y Apellido" 
                minlength="5" 
                class="register-control"
                value="<%= locals.oldData ? oldData.nombreCompleto : "" %>"
            >
            <% if (locals.errors && errors.nombreCompleto) { %>
            <div class="register-text-danger">
                 <%= errors.nombreCompleto.msg %> 
            </div>
            <% } %>
        </div>

        <div class="register-control-formulario">
            <div class="register-icon-container">
                <i class="far fa-user"></i>
            </div>
            <input 
                type="text" 
                name="usuario" 
                placeholder="Nombre de Usuario" 
                class="register-control" 
                minlength="5"
                value="<%= locals.oldData ? oldData.usuario : "" %>"
            >
            <% if (locals.errors && errors.usuario) { %>
                <div class="register-text-danger">
                     <%= errors.usuario.msg %> 
                </div>
            <% } %>
        </div>

        <div class="register-control-formulario">
            <div class="register-icon-container">
                <i class="far fa-envelope"></i>
            </div>
            <input 
                type="email" 
                name="email" 
                placeholder="Ingrese su mail" 
                class="register-control"
                value="<%= locals.oldData ? oldData.email : "" %>"
            >
            <% if (locals.errors && errors.email) { %>
                <div class="register-text-danger">
                     <%= errors.email.msg %> 
                </div>
            <% } %>
        </div>

        <div class="register-control-formulario">
            <label class="register-label-nacimiento">Fecha de Nacimiento</label>
            <input type="date" name="fecha"  class="register-control register-date">
        </div>

        <div class="register-control-formulario">
            <input type="password" name="password" id="password" placeholder="Password (Min 6 caracteres)" pattern=".{6,}" class="register-control">
            <div class="register-eye-container">
                <i id="visibilityBtn" class="register-eye"><span id="icon" class="material-icons-outlined">visibility</span></i>
            </div>
            <% if (locals.errors && errors.validarPassword) { %>
                <div class="register-text-danger">
                     <%= errors.validarPassword.msg %> 
                </div>
            <% } %>
        </div>

        <div class="register-control-formulario">
            <input type="password" name="validarPassword" id="confirm_password" placeholder="Reingrese su Password" pattern=".{6,}" class="register-control">
            <div class="register-eye-container">
                <i id="visibilityBtn2" class="register-eye"><span id="icon2" class="material-icons-outlined">visibility</span></i>
            </div>
            <% if (locals.errors && errors.validarPassword) { %>
                <div class="register-text-danger">
                     <%= errors.validarPassword.msg %> 
                </div>
            <% } %>
        </div>

        <div class="register-file">
            <label for="file" class="subir">
                <i class="fas fa-cloud-upload-alt"></i> Subir Imagen
            </label>
            <input id="file" name="avatar" onchange='cambiar()' type="file" style='display: none;'/>
        </div>    
        <div id="info" class="register-info"></div>
        
        <script>
            function cambiar(){
            var nombreArchivo = document.getElementById('file').files[0].name;
            document.getElementById('info').innerHTML = nombreArchivo;
            }
        </script>

        <button type="submit" class="register-submit">Registrarse</button>
    </form>

    <%- include('../partials/footer.ejs') %>

    <script src="/js/register-confirmPass.js"></script>
    <script src="/js/register-eye.js"></script>
</body>
</html>